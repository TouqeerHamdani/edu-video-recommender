<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Search Results - EduTV</title>
  <link rel="stylesheet" href="project.css" />
</head>
<body>
  <header>
    <h1>EduTV</h1>
    <p>Search Results</p>
  </header>

  <section id="results" class="video-section">
    <p style="text-align: center;">Loading recommendations...</p>
  </section>

  <footer>
    <p><a href="project.html">Back to Search</a></p>
  </footer>

  <script>
    function getQueryParam(param) {
      const urlParams = new URLSearchParams(window.location.search);
      return urlParams.get(param);
    }

    const query = getQueryParam("query");
    const user = getQueryParam("user") || "guest";

    const resultsSection = document.getElementById("results");

    if (!query) {
      resultsSection.innerHTML = "<p>No query provided.</p>";
    } else {
      fetch(`http://localhost:5000/api/recommend?query=${encodeURIComponent(query)}&user=${user}`)
        .then(res => res.json())
        .then(data => {
          resultsSection.innerHTML = "";
          data.results.forEach(video => {
            const card = document.createElement("div");
            card.className = "video-card";
            card.innerHTML = `
              <img src="${video.thumbnail}" alt="Thumbnail">
              <div class="info">
                <h3>${video.title}</h3>
                <p>${video.channel}</p>
                <a href="${video.link}" target="_blank" style="color: #0af;">Watch</a>
              </div>
            `;
            resultsSection.appendChild(card);
          });
        })
        .catch(err => {
          console.error("Fetch error:", err);
          resultsSection.innerHTML = "<p>Could not load recommendations.</p>";
        });
    }
  </script>
</body>
</html>
